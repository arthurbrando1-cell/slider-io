<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Slither Clone</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#0c0c14;
  font-family:Arial,sans-serif;
}
canvas{display:block}

#menu,#shop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.box{
  background:#151522;
  padding:25px;
  border-radius:12px;
  color:white;
  text-align:center;
}

#hud{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  z-index:5;
}

#boostBtn{
  position:fixed;
  right:20px;
  bottom:80px;
  width:70px;
  height:70px;
  border-radius:50%;
  background:#ff595e;
  color:white;
  font-weight:bold;
  border:none;
}

#joystick{
  position:fixed;
  left:30px;
  bottom:60px;
  width:120px;
  height:120px;
  border-radius:50%;
  background:rgba(255,255,255,.1);
}
#stick{
  width:50px;
  height:50px;
  border-radius:50%;
  background:white;
  position:absolute;
  top:35px;
  left:35px;
}
</style>
</head>

<body>

<div id="menu">
  <div class="box">
    <h2>üêç Slither.io</h2>
    <button onclick="start()">Jogar</button>
    <br><br>
    <button onclick="openShop()">Loja</button>
  </div>
</div>

<div id="shop" style="display:none">
  <div class="box">
    <h3>üõí Loja</h3>
    <p>Boost dura mais (fake)</p>
    <p>Velocidade +1 (fake)</p>
    <button onclick="closeShop()">Voltar</button>
  </div>
</div>

<div id="hud">Score: 0</div>
<button id="boostBtn">BOOST</button>

<div id="joystick">
  <div id="stick"></div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
resize();
addEventListener("resize", resize);
function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}

/* ===== GAME VARS ===== */
let snake=[], foods=[];
let playing=false;
let mouse={x:0,y:0};
let speed=2.5, boost=false;
let camZoom=1.3;

/* START */
function start(){
  document.getElementById("menu").style.display="none";
  playing=true;
  snake=[];
  for(let i=0;i<15;i++)snake.push({x:-i*8,y:0});
  foods=[];
  for(let i=0;i<600;i++)spawnFood();
  loop();
}

/* SHOP */
function openShop(){document.getElementById("shop").style.display="flex";}
function closeShop(){document.getElementById("shop").style.display="none";}

/* FOOD */
function spawnFood(){
  foods.push({
    x:Math.random()*5000-2500,
    y:Math.random()*5000-2500
  });
}

/* INPUT PC */
addEventListener("mousemove",e=>{
  mouse.x=e.clientX-canvas.width/2;
  mouse.y=e.clientY-canvas.height/2;
});
addEventListener("keydown",e=>{ if(e.key==="c") boost=true; });
addEventListener("keyup",e=>{ if(e.key==="c") boost=false; });

/* MOBILE BOOST */
document.getElementById("boostBtn").ontouchstart=()=>boost=true;
document.getElementById("boostBtn").ontouchend=()=>boost=false;

/* JOYSTICK */
let joy=document.getElementById("joystick");
let stick=document.getElementById("stick");
joy.ontouchmove=e=>{
  const r=joy.getBoundingClientRect();
  const t=e.touches[0];
  mouse.x=t.clientX-(r.left+r.width/2);
  mouse.y=t.clientY-(r.top+r.height/2);
  stick.style.left=(35+mouse.x/4)+"px";
  stick.style.top=(35+mouse.y/4)+"px";
};
joy.ontouchend=()=>{
  mouse={x:0,y:0};
  stick.style.left="35px";
  stick.style.top="35px";
};

/* UPDATE */
function update(){
  if(!playing)return;
  const head=snake[0];
  const d=Math.hypot(mouse.x,mouse.y)||1;
  const sp=boost?5:2.5;

  snake.unshift({
    x:head.x+mouse.x/d*sp,
    y:head.y+mouse.y/d*sp
  });

  let ate=false;
  foods=foods.filter(f=>{
    if(Math.hypot(head.x-f.x,head.y-f.y)<7){
      ate=true;
      return false;
    }
    return true;
  });

  if(!ate || boost) snake.pop();
  if(foods.length<500)spawnFood();

  document.getElementById("hud").innerText="Score: "+snake.length;
}

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.save();
  ctx.translate(canvas.width/2,canvas.height/2);
  ctx.scale(camZoom,camZoom);
  ctx.translate(-snake[0].x,-snake[0].y);

  ctx.fillStyle="#ffd166";
  foods.forEach(f=>{
    ctx.beginPath();
    ctx.arc(f.x,f.y,3,0,Math.PI*2);
    ctx.fill();
  });

  ctx.fillStyle="#6a4c93";
  snake.forEach((s,i)=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,i?6:7,0,Math.PI*2);
    ctx.fill();
  });

  ctx.restore();
}

/* LOOP */
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
</script>

</body>
</html>
