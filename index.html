<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Slither Clone</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#0c0c14;
  font-family:Arial, sans-serif;
}
canvas{display:block}

#menu{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
#menu .box{
  background:#151522;
  padding:25px;
  border-radius:12px;
  text-align:center;
  color:white;
}
#menu input{
  width:200px;
  padding:8px;
  margin:10px 0;
}
.skins{
  display:flex;
  justify-content:center;
  gap:10px;
}
.skin{
  width:25px;
  height:25px;
  border-radius:50%;
  cursor:pointer;
  border:2px solid transparent;
}
.skin.selected{border-color:white}

#score{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
}
</style>
</head>

<body>

<div id="menu">
  <div class="box">
    <h2>üêç Slither.io</h2>
    <input id="nick" placeholder="Seu nick"><br>
    <div class="skins" id="skins"></div>
    <button onclick="start()">Jogar</button>
  </div>
</div>

<div id="score">Score: 0</div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
resize();
addEventListener("resize", resize);

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}

/* ===== MENU / SKINS ===== */
const skinColors = ["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93"];
let selectedColor = skinColors[0];

const skinsDiv = document.getElementById("skins");
skinColors.forEach(c=>{
  const d=document.createElement("div");
  d.className="skin";
  d.style.background=c;
  if(c===selectedColor)d.classList.add("selected");
  d.onclick=()=>{
    document.querySelectorAll(".skin").forEach(s=>s.classList.remove("selected"));
    d.classList.add("selected");
    selectedColor=c;
  }
  skinsDiv.appendChild(d);
});

/* ===== GAME VARS ===== */
let snake = [];
let foods = [];
let playing = false;
let mouse = {x:innerWidth/2,y:innerHeight/2};
let speed = 3;

/* INPUT */
addEventListener("mousemove",e=>{
  mouse.x=e.clientX;
  mouse.y=e.clientY;
});

/* START */
function start(){
  document.getElementById("menu").style.display="none";
  playing=true;

  snake=[];
  for(let i=0;i<10;i++){
    snake.push({x:0-i*8,y:0});
  }

  foods=[];
  for(let i=0;i<200;i++)spawnFood();

  loop();
}

/* FOOD */
function spawnFood(){
  foods.push({
    x:Math.random()*4000-2000,
    y:Math.random()*4000-2000
  });
}

/* UPDATE */
function update(){
  if(!playing)return;

  const head = snake[0];
  const dx = mouse.x - canvas.width/2;
  const dy = mouse.y - canvas.height/2;
  const d = Math.hypot(dx,dy)||1;

  const nx = head.x + dx/d*speed;
  const ny = head.y + dy/d*speed;

  snake.unshift({x:nx,y:ny});

  /* EAT FOOD ‚Üí VIRA CORPO */
  let ate=false;
  foods = foods.filter(f=>{
    if(Math.hypot(nx-f.x,ny-f.y)<8){
      ate=true;
      document.getElementById("score").innerText="Score: "+snake.length;
      return false;
    }
    return true;
  });

  if(!ate) snake.pop();
  if(foods.length<150)spawnFood();
}

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const camX = canvas.width/2 - snake[0].x;
  const camY = canvas.height/2 - snake[0].y;

  ctx.save();
  ctx.translate(camX,camY);

  /* FOOD */
  ctx.fillStyle="#ffd166";
  foods.forEach(f=>{
    ctx.beginPath();
    ctx.arc(f.x,f.y,3,0,Math.PI*2);
    ctx.fill();
  });

  /* SNAKE */
  ctx.fillStyle=selectedColor;
  snake.forEach((s,i)=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,i===0?7:6,0,Math.PI*2);
    ctx.fill();
  });

  ctx.restore();
}

/* LOOP */
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
</script>

</body>
</html>
